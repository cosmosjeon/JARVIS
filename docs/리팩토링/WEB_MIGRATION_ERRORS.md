# ì˜¤ë¥˜ ì‹œë‚˜ë¦¬ì˜¤ ë° ëŒ€ì‘ ë°©ì•ˆ

> **ëª©ì **: ëŒ€ê·œëª¨ ë¦¬íŒ©í† ë§ ì¤‘ ë°œìƒ ê°€ëŠ¥í•œ ëª¨ë“  ì˜¤ë¥˜ ì‹œë‚˜ë¦¬ì˜¤ì™€ ëŒ€ì‘ ë°©ë²•
> **ì¤‘ìš”ë„**: â˜…â˜…â˜…â˜…â˜… (í•„ìˆ˜ ìˆ™ì§€)

---

## ğŸ“‹ ëª©ì°¨

1. [ì˜¤ë¥˜ ë°©ì§€ ì›ì¹™](#ì˜¤ë¥˜-ë°©ì§€-ì›ì¹™)
2. [Phaseë³„ ì˜¤ë¥˜ ì‹œë‚˜ë¦¬ì˜¤](#phaseë³„-ì˜¤ë¥˜-ì‹œë‚˜ë¦¬ì˜¤)
3. [ê¸°ìˆ ë³„ ì˜¤ë¥˜ ëŒ€ì‘](#ê¸°ìˆ ë³„-ì˜¤ë¥˜-ëŒ€ì‘)
4. [ë¡¤ë°± ì „ëµ](#ë¡¤ë°±-ì „ëµ)
5. [ê¸´ê¸‰ ë³µêµ¬ ê°€ì´ë“œ](#ê¸´ê¸‰-ë³µêµ¬-ê°€ì´ë“œ)

---

## ì˜¤ë¥˜ ë°©ì§€ ì›ì¹™

### ğŸ›¡ï¸ 5ëŒ€ ì•ˆì „ ì›ì¹™

1. **ì¦ì€ ì»¤ë°‹**: ì‘ì—… ë‹¨ìœ„ë§ˆë‹¤ ì¦‰ì‹œ ì»¤ë°‹
2. **ì ì§„ì  ë³€ê²½**: í•œ ë²ˆì— 1ê°œ íŒŒì¼ë§Œ ìˆ˜ì •
3. **ì¦‰ì‹œ ê²€ì¦**: ìˆ˜ì • í›„ ì¦‰ì‹œ ë¹Œë“œ/í…ŒìŠ¤íŠ¸
4. **ë¡¤ë°± ì¤€ë¹„**: í•­ìƒ ì´ì „ ì»¤ë°‹ìœ¼ë¡œ ëŒì•„ê°ˆ ìˆ˜ ìˆê²Œ
5. **ë°±ì—… ìœ ì§€**: ì£¼ìš” ë‹¨ê³„ë§ˆë‹¤ íƒœê·¸ ìƒì„±

### ğŸ“ ì‘ì—… íë¦„

```
ì‘ì—… ì „
â”œâ”€ 1. Git ìƒíƒœ í™•ì¸ (ëª¨ë‘ ì»¤ë°‹ë¨?)
â”œâ”€ 2. ë°±ì—… íƒœê·¸ ìƒì„±
â””â”€ 3. npm run build ì„±ê³µ í™•ì¸

ì‘ì—… ì¤‘
â”œâ”€ 4. 1ê°œ íŒŒì¼ ìˆ˜ì •
â”œâ”€ 5. npm run type-check (íƒ€ì… ì—ëŸ¬ í™•ì¸)
â”œâ”€ 6. npm run build (ë¹Œë“œ ì„±ê³µ í™•ì¸)
â””â”€ 7. npm run dev (ì‹¤í–‰ í™•ì¸)

ì‘ì—… í›„
â”œâ”€ 8. ê´€ë ¨ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
â”œâ”€ 9. ìˆ˜ë™ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
â”œâ”€ 10. Git ì»¤ë°‹
â””â”€ 11. ë‹¤ìŒ ì‘ì—…ìœ¼ë¡œ

ì˜¤ë¥˜ ë°œìƒ ì‹œ
â”œâ”€ A. ì¦ìƒ ê¸°ë¡ (ìŠ¤í¬ë¦°ìƒ·, ì—ëŸ¬ ë©”ì‹œì§€)
â”œâ”€ B. ì´ ë¬¸ì„œì—ì„œ í•´ê²°ì±… ì°¾ê¸°
â”œâ”€ C. í•´ê²° ì•ˆ ë˜ë©´ ë¡¤ë°±
â””â”€ D. ì›ì¸ íŒŒì•… í›„ ì¬ì‹œë„
```

---

## Phaseë³„ ì˜¤ë¥˜ ì‹œë‚˜ë¦¬ì˜¤

### Phase 0: ë ˆê±°ì‹œ ì½”ë“œ ì‚­ì œ

#### ì˜¤ë¥˜ 1: ì‹¤ì œë¡œ ì‚¬ìš© ì¤‘ì¸ ì½”ë“œ ì‚­ì œ

**ì¦ìƒ**:
```
npm run build

Module not found: Error: Can't resolve './deleted-file'
```

**ì›ì¸**:
- ì‚¬ìš© ì—¬ë¶€ ë¶„ì„ ì‹¤ìˆ˜
- ë™ì  import ë†“ì¹¨
- JSXì—ì„œ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© (export ê²€ìƒ‰ìœ¼ë¡œ ëª» ì°¾ìŒ)

**ëŒ€ì‘**:
```bash
# 1. ì‚­ì œí•œ íŒŒì¼ í™•ì¸
git diff HEAD~1

# 2. í•´ë‹¹ íŒŒì¼ ë³µêµ¬
git checkout HEAD~1 -- src/path/to/deleted-file.js

# 3. ì‚¬ìš©ì²˜ ì •í™•íˆ ê²€ìƒ‰
grep -r "deleted-file" src/

# 4. ì‹¤ì œ ì‚¬ìš©ì²˜ í™•ì¸ í›„ íŒë‹¨
```

**ì˜ˆë°©**:
```bash
# ì‚­ì œ ì „ ì‚¬ìš©ì²˜ ê²€ìƒ‰ (íŒŒì¼ëª… + export ì´ë¦„)
grep -r "MyComponent\|myFunction" src/ --include="*.js" --include="*.jsx"

# 0ê°œ ê²°ê³¼ì—¬ì•¼ ì•ˆì „
```

#### ì˜¤ë¥˜ 2: Electron ë¶„ê¸° ì œê±° ì‹œ ì›¹ ë¡œì§ë„ ì†ìƒ

**ì¦ìƒ**:
```typescript
// âŒ ì˜ëª»ëœ ì œê±°
if (isElectron()) {
  // Electron ë¡œì§
  doElectronStuff();
} else {
  // ì›¹ ë¡œì§ (ì´ê²ƒë„ í•¨ê»˜ ì‚­ì œë¨)
  doWebStuff();  // â† ì‚¬ë¼ì§!
}
```

**ëŒ€ì‘**:
```typescript
// âœ… ì˜¬ë°”ë¥¸ ì œê±°
// Electron ë¶„ê¸° ì „ì²´ ì œê±° í›„ ì›¹ ë¡œì§ë§Œ ìœ ì§€
doWebStuff();
```

**ì˜ˆë°©**:
- `if (isElectron())` ê²€ìƒ‰ í›„ `else` ë¸”ë¡ í™•ì¸
- ì›¹ ë¡œì§ì€ ë°˜ë“œì‹œ ìœ ì§€

---

### Phase 1: Vite í”„ë¡œì íŠ¸ êµ¬ì¶•

#### ì˜¤ë¥˜ 3: í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ ì‹¤íŒ¨

**ì¦ìƒ**:
```
console.log(import.meta.env.VITE_SUPABASE_URL);
// ì¶œë ¥: undefined
```

**ì›ì¸**:
1. `.env` íŒŒì¼ ëˆ„ë½
2. `VITE_` prefix ëˆ„ë½
3. `.env` íŒŒì¼ ìœ„ì¹˜ ì˜ëª»ë¨

**ëŒ€ì‘**:
```bash
# 1. .env íŒŒì¼ ìœ„ì¹˜ í™•ì¸ (í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ìˆì–´ì•¼ í•¨)
ls -la .env
# -rw-r--r--  1 user  staff  123 Oct 18 10:00 .env

# 2. ë‚´ìš© í™•ì¸
cat .env
# VITE_SUPABASE_URL=https://xxx.supabase.co
# VITE_SUPABASE_ANON_KEY=xxx

# 3. prefix í™•ì¸ (VITE_ë¡œ ì‹œì‘í•´ì•¼ í•¨)
grep "^VITE_" .env

# 4. ê°œë°œ ì„œë²„ ì¬ì‹œì‘ (í•„ìˆ˜!)
npm run dev
```

**ì˜ˆë°©**:
- `.env.example` íŒŒì¼ ìƒì„±í•´ì„œ ê°€ì´ë“œ ì œê³µ
- í™˜ê²½ ë³€ìˆ˜ ì—†ìœ¼ë©´ ëª…í™•í•œ ì—ëŸ¬ ë˜ì§€ê¸°:
```typescript
const url = import.meta.env.VITE_SUPABASE_URL;
if (!url) {
  throw new Error('VITE_SUPABASE_URL is required in .env file');
}
```

#### ì˜¤ë¥˜ 4: Path Alias ë™ì‘ ì•ˆ í•¨

**ì¦ìƒ**:
```typescript
import { Tree } from '@domain/entities';
// Error: Cannot find module '@domain/entities'
```

**ì›ì¸**:
1. `tsconfig.json`ì— paths ì„¤ì • ëˆ„ë½
2. `vite.config.ts`ì— alias ì„¤ì • ëˆ„ë½
3. ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ì„¤ì •ë¨

**ëŒ€ì‘**:
```typescript
// 1. tsconfig.json í™•ì¸
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@domain/*": ["src/domain/*"]  // â† ìˆì–´ì•¼ í•¨
    }
  }
}

// 2. vite.config.ts í™•ì¸
export default defineConfig({
  resolve: {
    alias: {
      '@domain': path.resolve(__dirname, 'src/domain')  // â† ìˆì–´ì•¼ í•¨
    }
  }
});

// 3. ê°œë°œ ì„œë²„ ì¬ì‹œì‘
npm run dev
```

**ê²€ì¦**:
```bash
# í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±
echo "import { Tree } from '@domain/entities';" > src/test.ts

# íƒ€ì… ì²´í¬
npm run type-check
# ì—ëŸ¬ ì—†ìœ¼ë©´ ì„±ê³µ

# ì •ë¦¬
rm src/test.ts
```

#### ì˜¤ë¥˜ 5: Tailwind CSS ìŠ¤íƒ€ì¼ ì ìš© ì•ˆ ë¨

**ì¦ìƒ**:
```jsx
<div className="bg-blue-500">Hello</div>
// íŒŒë€ ë°°ê²½ ì•ˆ ë‚˜ì˜´
```

**ì›ì¸**:
1. `index.css`ì— Tailwind directives ëˆ„ë½
2. `tailwind.config.js` ëˆ„ë½
3. PostCSS ì„¤ì • ëˆ„ë½

**ëŒ€ì‘**:
```css
/* src/index.css - í™•ì¸ */
@tailwind base;
@tailwind components;
@tailwind utilities;
```

```javascript
// tailwind.config.js - í™•ì¸
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",  // â† ê²½ë¡œ í™•ì¸
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

```javascript
// postcss.config.js - í™•ì¸
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
```

**ê²€ì¦**:
```bash
# ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬
# Elements íƒ­ì—ì„œ í•´ë‹¹ div í™•ì¸
# Computed íƒ­ì—ì„œ background-color í™•ì¸
# rgb(59, 130, 246) ë‚˜ì™€ì•¼ í•¨ (blue-500)
```

---

### Phase 2: ì•„í‚¤í…ì²˜ ì¬ì •ë¹„

#### ì˜¤ë¥˜ 6: ìˆœí™˜ ì˜ì¡´ì„± (Circular Dependency)

**ì¦ìƒ**:
```
Warning: Circular dependency detected:
src/domain/services/TreeService.ts ->
src/infrastructure/supabase/repositories/SupabaseTreeRepository.ts ->
src/domain/services/TreeService.ts
```

**ì›ì¸**:
```typescript
// domain/services/TreeService.ts
import { SupabaseTreeRepository } from '@infrastructure/...';  // âŒ

// infrastructure/supabase/repositories/SupabaseTreeRepository.ts
import { TreeService } from '@domain/services/TreeService';  // âŒ
```

**ëŒ€ì‘**:
```typescript
// âœ… ì˜¬ë°”ë¥¸ êµ¬ì¡°

// domain/repositories/ITreeRepository.ts (ì¸í„°í˜ì´ìŠ¤ë§Œ)
export interface ITreeRepository {
  findByUserId(userId: string): Promise<Tree[]>;
}

// domain/services/TreeService.ts (ì¸í„°í˜ì´ìŠ¤ ì˜ì¡´)
import type { ITreeRepository } from '../repositories/ITreeRepository';

export class TreeService {
  constructor(private repository: ITreeRepository) {}
  // ...
}

// infrastructure/supabase/repositories/SupabaseTreeRepository.ts (êµ¬í˜„)
import type { ITreeRepository } from '@domain/repositories/ITreeRepository';

export class SupabaseTreeRepository implements ITreeRepository {
  // ...
}

// infrastructure/di/container.ts (ì¡°ë¦½)
import { TreeService } from '@domain/services/TreeService';
import { SupabaseTreeRepository } from '../supabase/repositories/SupabaseTreeRepository';

const treeRepository = new SupabaseTreeRepository(supabase);
const treeService = new TreeService(treeRepository);
```

**ì˜ˆë°©**:
- Domainì€ ì ˆëŒ€ Infrastructure import ê¸ˆì§€
- Interfaceë¡œ ì˜ì¡´ì„± ì—­ì „ (DIP)

#### ì˜¤ë¥˜ 7: Zustand storeì—ì„œ ë¬´í•œ ë£¨í”„

**ì¦ìƒ**:
```typescript
// ì»´í¬ë„ŒíŠ¸ê°€ ë¬´í•œ ë¦¬ë Œë”ë§
// ë¸Œë¼ìš°ì € ë©ˆì¶¤
```

**ì›ì¸**:
```typescript
// âŒ ì˜ëª»ëœ ì‚¬ìš©
function MyComponent() {
  const store = useLibraryStore();  // ì „ì²´ store êµ¬ë…
  // store ë³€ê²½ â†’ ë¦¬ë Œë” â†’ store ì½ê¸° â†’ ë¦¬ë Œë” â†’ ...
}
```

**ëŒ€ì‘**:
```typescript
// âœ… í•„ìš”í•œ stateë§Œ ì„ íƒì  êµ¬ë…
function MyComponent() {
  const trees = useLibraryStore(state => state.trees);  // treesë§Œ êµ¬ë…
  const setTrees = useLibraryStore(state => state.setTrees);

  // trees ë³€ê²½ ì‹œì—ë§Œ ë¦¬ë Œë”
}
```

**ì˜ˆë°©**:
- í•­ìƒ selector í•¨ìˆ˜ ì‚¬ìš©: `(state) => state.specificValue`
- ì „ì²´ store êµ¬ë… ê¸ˆì§€

#### ì˜¤ë¥˜ 8: DI Containerì—ì„œ null ì°¸ì¡°

**ì¦ìƒ**:
```
TypeError: Cannot read property 'loadUserTrees' of undefined
container.treeService.loadUserTrees(...)
```

**ì›ì¸**:
```typescript
// âŒ ìˆœì„œ ë¬¸ì œ
export const container = {
  treeService: new TreeService(container.treeRepository),  // â† ì´ ì‹œì ì— treeRepository ì—†ìŒ
  treeRepository: new SupabaseTreeRepository(supabase),
};
```

**ëŒ€ì‘**:
```typescript
// âœ… ìˆœì„œ ì¡°ì • ë˜ëŠ” lazy ì´ˆê¸°í™”
const supabaseClient = createSupabaseClient();

const treeRepository = new SupabaseTreeRepository(supabaseClient);
const folderRepository = new SupabaseFolderRepository(supabaseClient);

export const container = {
  // Repositories ë¨¼ì €
  treeRepository,
  folderRepository,

  // Services ë‚˜ì¤‘ (repository ì‚¬ìš©)
  treeService: new TreeService(treeRepository),
  folderService: new FolderService(folderRepository),
};
```

**ë˜ëŠ”**:
```typescript
// Lazy ì´ˆê¸°í™”
class Container {
  private _treeService?: TreeService;

  get treeService(): TreeService {
    if (!this._treeService) {
      this._treeService = new TreeService(this.treeRepository);
    }
    return this._treeService;
  }
}
```

---

### Phase 3: ì½”ë“œ ì´ì‹

#### ì˜¤ë¥˜ 9: TypeScript íƒ€ì… ì—ëŸ¬ ëŒ€ëŸ‰ ë°œìƒ

**ì¦ìƒ**:
```
src/features/library/components/TreeList.tsx:15:23
Error: Property 'treeData' does not exist on type 'Tree'

(100ê°œ ì´ìƒì˜ íƒ€ì… ì—ëŸ¬)
```

**ì›ì¸**:
- JS â†’ TS ë³€í™˜ ì‹œ íƒ€ì… ì •ì˜ ë¶ˆì™„ì „
- `any` ë‚¨ë°œë¡œ íƒ€ì… ì²´í¬ ìš°íšŒ

**ëŒ€ì‘ (ìš°ì„ ìˆœìœ„)**:
```typescript
// 1ìˆœìœ„: ì„ì‹œë¡œ any ì‚¬ìš© (ë¹Œë“œ í†µê³¼ì‹œí‚¤ê¸°)
const tree: any = selectedTree;
tree.treeData.nodes.forEach(...);

// 2ìˆœìœ„: ì ì§„ì ìœ¼ë¡œ ì •í™•í•œ íƒ€ì…ìœ¼ë¡œ êµì²´
const tree: Tree = selectedTree;
if ('treeData' in tree) {
  tree.treeData.nodes.forEach(...);
}

// 3ìˆœìœ„: íƒ€ì… ê°€ë“œ í•¨ìˆ˜ ì‘ì„±
function isTree(obj: any): obj is Tree {
  return obj && typeof obj.id === 'string' && 'treeData' in obj;
}

if (isTree(selectedTree)) {
  selectedTree.treeData.nodes.forEach(...);
}
```

**ì˜ˆë°©**:
- ì²˜ìŒë¶€í„° interface ì •ì˜ ì™„ì„±
- `any` ì‚¬ìš© ì‹œ ì£¼ì„ìœ¼ë¡œ TODO í‘œì‹œ
- ì ì§„ì ìœ¼ë¡œ any ì œê±°

#### ì˜¤ë¥˜ 10: D3 ì‹œë®¬ë ˆì´ì…˜ì´ ë©ˆì¶¤

**ì¦ìƒ**:
```
// ë…¸ë“œê°€ ì›€ì§ì´ì§€ ì•ŠìŒ
// Force simulation ë™ì‘ ì•ˆ í•¨
```

**ì›ì¸**:
```typescript
// âŒ useEffect ì˜ì¡´ì„± ë°°ì—´ ë¬¸ì œ
useEffect(() => {
  const simulation = createSimulation(nodes, links);
  simulation.on('tick', () => {
    setSimulationNodes([...simulation.nodes()]);
  });
}, []); // â† nodes, links ë³€ê²½ ì‹œ ì¬ìƒì„± ì•ˆ ë¨
```

**ëŒ€ì‘**:
```typescript
// âœ… ì˜ì¡´ì„± ë°°ì—´ì— nodes, links ì¶”ê°€
useEffect(() => {
  const simulation = createSimulation(nodes, links);

  simulation.on('tick', () => {
    setSimulationNodes([...simulation.nodes()]);
  });

  return () => {
    simulation.stop();  // cleanup
  };
}, [nodes, links]);  // â† ì˜ì¡´ì„± ì¶”ê°€
```

**ì˜ˆë°©**:
- ESLint react-hooks/exhaustive-deps ê·œì¹™ í™œì„±í™”
- ì˜ì¡´ì„± ë°°ì—´ ê²½ê³  ë¬´ì‹œí•˜ì§€ ë§ê¸°

#### ì˜¤ë¥˜ 11: Supabase ë°ì´í„° ë¡œë”© ë¬´í•œ ë£¨í”„

**ì¦ìƒ**:
```
// Network íƒ­ì—ì„œ ê°™ì€ ìš”ì²­ì´ ê³„ì† ë°˜ë³µ
// GET /trees?user_id=xxx (ìˆ˜ë°± ë²ˆ)
```

**ì›ì¸**:
```typescript
// âŒ useEffect ì˜ì¡´ì„± ë¬¸ì œ
useEffect(() => {
  container.treeService
    .loadUserTrees(user.id)
    .then(trees => {
      setTrees(trees);  // â† state ë³€ê²½
    });
}, [trees]);  // â† trees ë³€ê²½ â†’ ì¬ì‹¤í–‰ â†’ trees ë³€ê²½ â†’ ...
```

**ëŒ€ì‘**:
```typescript
// âœ… userë§Œ ì˜ì¡´ì„±ìœ¼ë¡œ
useEffect(() => {
  if (!user) return;

  container.treeService
    .loadUserTrees(user.id)
    .then(setTrees);
}, [user]);  // â† user ë³€ê²½ ì‹œì—ë§Œ ì¬ë¡œë”©
```

**ì˜ˆë°©**:
- Stateë¥¼ ì˜ì¡´ì„± ë°°ì—´ì— ë„£ì§€ ë§ ê²ƒ
- Setter í•¨ìˆ˜ëŠ” ì•ˆì •ì  (Reactê°€ ë³´ì¥)

#### ì˜¤ë¥˜ 12: ì»´í¬ë„ŒíŠ¸ ë¶„í•  ì‹œ props ëˆ„ë½

**ì¦ìƒ**:
```typescript
// LibraryAppì—ì„œ TreeListë¡œ ë¶„ë¦¬
// TreeListì—ì„œ deleteTree í•¨ìˆ˜ ì‚¬ìš© ë¶ˆê°€

TypeError: deleteTree is not a function
```

**ì›ì¸**:
```typescript
// âŒ LibraryAppì—ì„œ TreeListë¡œ props ì „ë‹¬ ì•ˆ í•¨
<TreeList trees={trees} />  // deleteTree ì•ˆ ë„˜ê¹€
```

**ëŒ€ì‘**:
```typescript
// âœ… í•„ìš”í•œ ëª¨ë“  props ì „ë‹¬
<TreeList
  trees={trees}
  onDelete={deleteTree}
  onRename={renameTree}
  onSelect={selectTree}
/>

// ë˜ëŠ” Zustand store ì§ì ‘ ì‚¬ìš©
function TreeList({ trees }: { trees: Tree[] }) {
  const deleteTree = useLibraryStore(state => state.deleteTree);
  // ...
}
```

**ì˜ˆë°©**:
- TypeScript interfaceë¡œ props ëª…ì‹œ
- ì»´íŒŒì¼ëŸ¬ê°€ ëˆ„ë½ ì•Œë ¤ì¤Œ

---

## ê¸°ìˆ ë³„ ì˜¤ë¥˜ ëŒ€ì‘

### TypeScript ê´€ë ¨

#### íƒ€ì… ì •ì˜ ì°¾ì„ ìˆ˜ ì—†ìŒ

**ì¦ìƒ**:
```
Could not find a declaration file for module 'd3'
```

**ëŒ€ì‘**:
```bash
npm install --save-dev @types/d3
npm install --save-dev @types/react
npm install --save-dev @types/node
```

#### noUncheckedIndexedAccess ì—ëŸ¬

**ì¦ìƒ**:
```typescript
const tree = trees[0];  // Type: Tree | undefined
tree.title;  // Error: Object is possibly 'undefined'
```

**ëŒ€ì‘**:
```typescript
// âœ… ì˜µì…”ë„ ì²´ì´ë‹
const title = trees[0]?.title;

// âœ… Nullish coalescing
const tree = trees[0] ?? defaultTree;

// âœ… íƒ€ì… ê°€ë“œ
if (trees[0]) {
  trees[0].title;  // OK
}
```

### Vite ê´€ë ¨

#### HMR (Hot Module Replacement) ë™ì‘ ì•ˆ í•¨

**ì¦ìƒ**:
```
// ì½”ë“œ ìˆ˜ì •í•´ë„ ë¸Œë¼ìš°ì € ìë™ ìƒˆë¡œê³ ì¹¨ ì•ˆ ë¨
```

**ëŒ€ì‘**:
```bash
# 1. ê°œë°œ ì„œë²„ ì¬ì‹œì‘
npm run dev

# 2. ìºì‹œ ì‚­ì œ
rm -rf node_modules/.vite

# 3. ì™„ì „ ì¬ë¹Œë“œ
npm run build
npm run dev
```

### Zustand ê´€ë ¨

#### State ë³€ê²½ì´ ë°˜ì˜ ì•ˆ ë¨

**ì¦ìƒ**:
```typescript
setTrees([...newTrees]);
// UIì— ë³€ê²½ ì•ˆ ë³´ì„
```

**ëŒ€ì‘**:
```typescript
// âœ… ë¶ˆë³€ì„± í™•ì¸ (ìƒˆ ë°°ì—´ ìƒì„±)
setTrees([...newTrees]);  // OK

// âŒ ì§ì ‘ ìˆ˜ì • (Zustand ê°ì§€ ëª»í•¨)
trees.push(newTree);  // NG
setTrees(trees);  // ì°¸ì¡°ê°€ ê°™ì•„ì„œ ì—…ë°ì´íŠ¸ ì•ˆ ë¨
```

### Supabase ê´€ë ¨

#### CORS ì—ëŸ¬

**ì¦ìƒ**:
```
Access to fetch at 'https://xxx.supabase.co' from origin 'http://localhost:3000'
has been blocked by CORS policy
```

**ëŒ€ì‘**:
```bash
# Supabase Dashboardì—ì„œ ì„¤ì •
1. Project Settings â†’ API
2. "Allowed origins" í™•ì¸
3. http://localhost:3000 ì¶”ê°€
```

#### Auth ì„¸ì…˜ ë§Œë£Œ

**ì¦ìƒ**:
```
// ìƒˆë¡œê³ ì¹¨ í›„ ë¡œê·¸ì•„ì›ƒë¨
```

**ëŒ€ì‘**:
```typescript
// AuthProviderì—ì„œ persistSession í™•ì¸
createClient(url, key, {
  auth: {
    persistSession: true,  // â† trueì—¬ì•¼ í•¨
    autoRefreshToken: true,
  }
});
```

---

## ë¡¤ë°± ì „ëµ

### ë ˆë²¨ 1: íŒŒì¼ ë‹¨ìœ„ ë¡¤ë°±

```bash
# íŠ¹ì • íŒŒì¼ë§Œ ë³µêµ¬
git checkout HEAD -- src/path/to/file.ts
```

### ë ˆë²¨ 2: ì»¤ë°‹ ë‹¨ìœ„ ë¡¤ë°±

```bash
# ë§ˆì§€ë§‰ ì»¤ë°‹ ì·¨ì†Œ (ë³€ê²½ì‚¬í•­ ìœ ì§€)
git reset --soft HEAD~1

# ë§ˆì§€ë§‰ ì»¤ë°‹ ì·¨ì†Œ (ë³€ê²½ì‚¬í•­ ì‚­ì œ)
git reset --hard HEAD~1
```

### ë ˆë²¨ 3: íƒœê·¸ë¡œ ë¡¤ë°±

```bash
# ë°±ì—… íƒœê·¸ ëª©ë¡ í™•ì¸
git tag | grep backup

# íŠ¹ì • íƒœê·¸ë¡œ ì™„ì „ ë³µêµ¬
git reset --hard backup-before-vite-20251018
```

### ë ˆë²¨ 4: ìƒˆ ë¸Œëœì¹˜ì—ì„œ ì¬ì‹œì‘

```bash
# í˜„ì¬ ì‘ì—… ì„ì‹œ ì €ì¥
git stash

# ì´ì „ ì•ˆì • ë²„ì „ì—ì„œ ìƒˆ ë¸Œëœì¹˜
git checkout -b web-refactor-v2 backup-phase1-complete

# ì‘ì—… ë‹¤ì‹œ ì‹œì‘
```

---

## ê¸´ê¸‰ ë³µêµ¬ ê°€ì´ë“œ

### ìƒí™© 1: ë¹Œë“œ ì™„ì „ ì‹¤íŒ¨, ì›ì¸ ëª¨ë¦„

```bash
# 1. íŒ¨ë‹‰í•˜ì§€ ë§ê¸°
# 2. ë§ˆì§€ë§‰ ì„±ê³µ ì»¤ë°‹ìœ¼ë¡œ ë³µêµ¬
git log --oneline -10
git reset --hard <ë§ˆì§€ë§‰-ì„±ê³µ-ì»¤ë°‹-í•´ì‹œ>

# 3. í™•ì¸
npm run build
# ì„±ê³µí•˜ë©´ OK

# 4. ì‹¤íŒ¨í•œ ë³€ê²½ì‚¬í•­ ë‹¤ì‹œ ì‹œë„
# ì´ë²ˆì—” í•œ ì¤„ì”© ì‹ ì¤‘í•˜ê²Œ
```

### ìƒí™© 2: ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„° ì†ìƒ

```bash
# SupabaseëŠ” ìë™ ë°±ì—… ì œê³µ
# Supabase Dashboard â†’ Database â†’ Backups
# ìµœê·¼ ë°±ì—…ì—ì„œ ë³µêµ¬
```

### ìƒí™© 3: node_modules ê¼¬ì„

```bash
# ì™„ì „ ì¬ì„¤ì¹˜
rm -rf node_modules package-lock.json
npm install

# ìºì‹œë„ ì‚­ì œ
rm -rf node_modules/.cache
rm -rf node_modules/.vite
```

### ìƒí™© 4: Git ì¶©ëŒ í•´ê²° ì‹¤íŒ¨

```bash
# ë³‘í•© ì·¨ì†Œ
git merge --abort

# ë˜ëŠ” ë¦¬ë² ì´ìŠ¤ ì·¨ì†Œ
git rebase --abort

# ê¹¨ë—í•œ ìƒíƒœë¡œ ë˜ëŒë¦¬ê¸°
git reset --hard HEAD
```

---

## ì˜ˆë°© ì²´í¬ë¦¬ìŠ¤íŠ¸

ì‘ì—… ì „ ë°˜ë“œì‹œ í™•ì¸:

```
â–¡ Gitì— ëª¨ë“  ë³€ê²½ì‚¬í•­ ì»¤ë°‹ë¨
â–¡ npm run build ì„±ê³µ
â–¡ npm run test í†µê³¼
â–¡ ë°±ì—… íƒœê·¸ ìƒì„± ì™„ë£Œ
â–¡ .env íŒŒì¼ ë°±ì—… ì™„ë£Œ
â–¡ ì‘ì—… ê³„íš ëª…í™•í•¨
â–¡ ë¡¤ë°± ë°©ë²• ìˆ™ì§€í•¨
â–¡ ì¶©ë¶„í•œ ì‹œê°„ í™•ë³´ (ì¤‘ë‹¨ ì‹œ ì¤‘ê°„ ì €ì¥ ê°€ëŠ¥)
```

ì‘ì—… í›„ ë°˜ë“œì‹œ í™•ì¸:

```
â–¡ npm run type-check ì—ëŸ¬ ì—†ìŒ
â–¡ npm run build ì„±ê³µ
â–¡ npm run test í†µê³¼
â–¡ npm run dev ì‹¤í–‰ë¨
â–¡ ë¸Œë¼ìš°ì €ì—ì„œ ê¸°ëŠ¥ ë™ì‘ í™•ì¸
â–¡ ì½˜ì†” ì—ëŸ¬ ì—†ìŒ
â–¡ Git ì»¤ë°‹ ì™„ë£Œ
â–¡ ì»¤ë°‹ ë©”ì‹œì§€ ëª…í™•í•¨
```

---

## ë„ì›€ ìš”ì²­ ì‹œ ì œê³µí•  ì •ë³´

ë¬¸ì œ ë°œìƒ ì‹œ ë‹¤ìŒ ì •ë³´ ìˆ˜ì§‘:

```bash
# 1. í™˜ê²½ ì •ë³´
node --version
npm --version
git branch
git log --oneline -5

# 2. ì—ëŸ¬ ë©”ì‹œì§€
# ì „ì²´ ì—ëŸ¬ ìŠ¤íƒ ë³µì‚¬

# 3. ì¬í˜„ ë‹¨ê³„
# 1. npm run dev
# 2. ë¸Œë¼ìš°ì € http://localhost:3000
# 3. ë¡œê·¸ì¸ í´ë¦­
# 4. ì—ëŸ¬ ë°œìƒ

# 4. ìŠ¤í¬ë¦°ìƒ·
# ì—ëŸ¬ í™”ë©´ ìº¡ì²˜

# 5. ê´€ë ¨ ì½”ë“œ
# ë¬¸ì œ ë°œìƒ íŒŒì¼ì˜ í•´ë‹¹ ë¶€ë¶„ ë³µì‚¬
```

---

**ë‹¤ìŒ ë¬¸ì„œ**: [WEB_MIGRATION_CHECKLIST.md](./WEB_MIGRATION_CHECKLIST.md)
